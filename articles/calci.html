<!DOCTYPE html>
<html>
<head>
	<title>積分計算機</title>
</head>
<body>
	<h1>積分計算機</h1>
	<p>積分範囲を入力してください。</p>
	<p>下限:</p>
	<input type="text" id="inputLowerLimit">
	<p>上限:</p>
	<input type="text" id="inputUpperLimit">
	<p>被積分関数f(x) = </p>
	<input type="text" id="inputFunction">
	<button onclick="solve()">解く</button>
	<p id="result"></p>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.5.0/math.js" integrity="sha512-lUqAb6UeA6UJH6UZlwBlyT9TmTfT28CmMV2pyaHdC39/LsFgOmZ+BjKs7sJweOQJlGArvg9XsjfodlT+JflDZg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script>
		function solve() {
			// 入力された積分範囲と関数を取得する
			var lowerLimit = Number(document.getElementById("inputLowerLimit").value);
			var upperLimit = Number(document.getElementById("inputUpperLimit").value);
			var functionString = document.getElementById("inputFunction").value;

			// 数学表記を math.js で使える形に変換する
			var functionMath = math.parse(functionString);
			var functionCompiled = functionMath.compile();

			// 積分する
			var result = math.integral(function (x) {
				return functionCompiled.evaluate({ x: x });
			}, lowerLimit, upperLimit);

			// 結果を表示する
			document.getElementById("result").innerHTML = "積分値: " + result;
		}
	</script>
</body>
</html>
