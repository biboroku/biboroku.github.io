<!DOCTYPE html>
<html>
  <head>
    <title>関数のグラフ描画</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div style="width:75%;">
      <canvas id="myChart"></canvas>
    </div>
    <div>
      <input type="text" id="function-input" placeholder="関数を入力してください（例：sin(x)）" />
      <button onclick="updateChart()">グラフを更新</button>
    </div>
    <script>
      // グラフを描画するための設定
      var ctx = document.getElementById("myChart").getContext("2d");
      var myChart = new Chart(ctx, {
        type: "line",
        data: {
          labels: [], // x軸のラベル
          datasets: [
            {
              label: "関数", // グラフのタイトル
              data: [], // y軸の値
              fill: false,
              borderColor: "rgb(75, 192, 192)",
              tension: 0.1,
            },
          ],
        },
        options: {
          scales: {
            xAxes: [
              {
                scaleLabel: {
                  display: true,
                  labelString: "x",
                },
              },
            ],
            yAxes: [
              {
                scaleLabel: {
                  display: true,
                  labelString: "y",
                },
              },
            ],
          },
        },
      });

      // グラフを更新する関数
      function updateChart() {
        var funcStr = document.getElementById("function-input").value;
        var func = new Function("x", "return " + funcStr + ";");
        var data = [];
        var labels = [];
        var step = 0.1;
        for (var i = -10; i <= 10; i += step) {
          data.push(func(i));
          labels.push(i.toFixed(1));
        }
        myChart.data.datasets[0].data = data;
        myChart.data.labels = labels;
        myChart.update();
      }
    </script>
  </body>
</html>
